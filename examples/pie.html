<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>Pie chart</title>
</head>

<body>

  <h1>Pie chart</h1>
  <div id="canvas-wrapper" style="width: 400px; height: 400px;"></div>
  <div style="font-family: Hack, Consolas, monospace">
    <pre id="script-preview"></pre>
  </div>

  <script src="dist/example.js"></script>
  <script>
    function round(x, n) {
      const y = x * Math.pow(10, n);
      return Math.round(y) / Math.pow(10, n);
    }
    function val() {
      return Math.random()*0.75 + 0.25;
    }
  </script>
  <script id="init">
    const div = document.querySelector('#canvas-wrapper');
    const canvas = bogglechart.create_canvas(div);
    const data = [ val(), val() ];
    const pie_chart = bogglechart.pie_chart(
      canvas,
      [
        {
          title: `Blue: ${round(data[0], 2)}`,
          color: 'blue',
          value: data[0],
        },
        {
          title: `Yellow: ${round(data[1], 2)}`,
          color: 'yellow',
          value: data[1],
        },
      ],
      {
        inner_line_width: 3,
        inner_line_color: '#ccc',
        outer_line_width: 3,
        outer_line_color: '#ccc',

        cutout_radius: 0.5,
        interactions: true,
        label: `${round(data[1], 2)} / ${round(data[0], 2)}`,
      },
    );
    pie_chart.draw__animate_in();
  </script>
  <script>
    (function() {
      const s = document.querySelector('#init').innerHTML;
      document.querySelector('#script-preview').textContent = s;
    })();
  </script>

</body>
</html>

